<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="lib/fx.js"></script>
</head>
<body>
<script>
    L.entries = function* (obj) {
        for (const k in obj) yield [k, obj[k]];
    };

    const join = curry((sep = ',', iter) =>
        reduce((a, b) => `${a}${sep}${b}`, iter));


    const queryStr = pipe(
        L.entries,
        L.map(([k, v]) => `${k}=${v}`),
        join('&')
    );
    // log(queryStr({limit: 10, offset: 10, type: 'notice'}));
</script>

<script>
    const users = [
        {age: 21},
        {age: 31},
        {age: 25},
        {age: 26},
        {age: 28},
        {age: 21},
        {age: 23},
        {age: 27},
        {age: 33},
        {age: 35}
    ]

    const find = (f, iter) => go(
        iter,
        filter(f),
        take(1),
        ([a]) => a
    )


    // log(find(u => u.age < 25, users));
</script>

<script>

    const isIterable = (a) => a && a[Symbol.iterator];
    L.flatten = function* (iter) {
        for (const a of iter) {
            if (isIterable(a)) for (const b of a) yield b;
            else yield a;
        }
    }
    let it = L.flatten([[1, 2], 3, 4, 5, [6, 7, 8], 9])
    // log(...it)
    const flatten = pipe(L.flatten, take(Infinity));
    // log(flatten([[1, 2], 3, 4, 5, [6, 7, 8], 9]));
</script>
<script>
    L.flatMap = curry(pipe(L.map, L.flatten));
    const flatMap = curry(pipe(L.flatMap, take(Infinity)));
    it = L.flatMap(a => a * a, [[1, 2], 3, 4, 5, [6, 7, 8], 9]);
    // log(...it);

    const arr = [
        [1, 2],
        [3, 4, 5,],
        [6, 7, 8],
        [9, 10]
    ];
    go(
        arr,
        L.flatten,
        L.filter(a => a % 2),
        L.map(a => a * a),
        take(3),
        reduce(add),
        log
    )


</script>
</body>
</html>